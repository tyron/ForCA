{{extend 'layout.html'}}
<table>
    <tr>
        <td rowspan='2'>
            {{if prof.picture:}}
                {{=A(IMG(_width='100px', _src=URL('download', args=prof.picture)), 
                    _href=URL('home', vars=dict(id=prof.id)))}}
            {{else:}}
                {{=A(IMG(_width='100px', _src=URL(request.application, 'static/profs', 
                        prof.email.split('@')[0]+'.jpg')),
                    _href=URL('home', vars=dict(id=prof.id)))}}
            {{pass}}
        </td>
        <td>
            <table>
                <tr>
                    <h2>{{=prof.full_name}}</h2>
                </tr>
                <tr>
                    {{=prof.email}}<br />
                    {{if prof.site:}} 
                        {{=A(prof.site, _href=prof.site, _target="_blank")}}
                    {{pass}}
                </tr>
            </table>
        </td>
        <td>
            <div style="font-size:50px">
                <b>{{=prof.grade or ''}}</b>
            </div>
        </td>
    </tr>
</table>

{{if len(discs)>0:}}
    <br/>
    <table>
        <tr>
            <th>Disciplina</th>
            <th>Média nesta disciplina</th>
        </tr>
        {{for disc in discs:}}
            <tr>
                <td>{{=A(disc['name'], _href=URL(request.application,'disc','home',vars=dict(disc_id=disc['id'])))}}</td>
                <td>
                    {{=disc['grade'] if not disc['grade'] == '\\' else '-'}}
                </td>
            </tr>
        {{pass}}
    </table>
{{pass}}

<br/>

<div class="filters">
    <form id='search' name='search' action="">
        <input type="hidden" name="prof_id" value="{{=prof.id}}"/>
        <table>
            <tr>
                <td style="padding:0px; vertical-align:middle;"><b>Disciplina:</b></td>
                <td>{{=fields['disc']}}</td>
                <td style="padding:0px; vertical-align:middle;"><b>Ano:</b></td>
                <td>{{=fields['year']}}</td>
                <td style="padding:0px; vertical-align:middle;"><b>Nota:</b></td>
                <td>{{=fields['grade']}}</td>
                <td>
                    <input type="submit" name="submit" value="Buscar!" style="float:right"/>
                </td>
            </tr>
        </table>
    </form>
</div>

{{if not len(evals):}}
    <br/><br/>
    <i>nenhuma avaliação</i>
    <br/><br/>
{{pass}}

{{include "eval/list.html"}}

{{if not auth.has_membership('Professor'):}}
    {{=A('Adicionar avaliação', _href=URL(request.application, 'eval', 'create', vars=dict(prof_id=prof.id)))}}
{{pass}}
