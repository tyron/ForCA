{{extend 'layout.html'}}
<table>
    <tr>
        <td>
            <table>
                <tr>
                    <h2>{{=disc.short_name}}</h2>
                </tr>
                <tr>
                    {{=disc.name}}
                </tr>
            </table>
        </td>
    </tr>
</table>

{{if disc.resume != None:}}
    <table>
        <tr>
           <th><h3>Súmula</h3></th>
        </tr>
        <tr>
            <td>{{=disc.resume or '-'}}</td>
        </tr>
    </table>
{{pass}}

{{if len(profs)>0:}}
    <br/>
    <table>
        <tr>
            <th>Professor</th>
            <th>Média em {{= disc.short_name}}</th>
        </tr>
        {{for prof in profs:}}
            <tr>
                <td>{{=A(prof['full_name'], _href=URL(request.application,'prof','home',vars=dict(prof_id=prof['id'])))}}</td>
                <td>
                    {{=prof['grade'] if not prof['grade'] == '\\' else '-'}}
                </td>
            </tr>
        {{pass}}
        {{if disc_grade != None:}}
        <tr>
            <th colspan=2>A média de todos professores em {{=disc.short_name}} é {{=disc_grade or '-'}}</th>
        </tr>
        {{pass}}
    </table>
{{pass}}

<br/>
<i>{{='nenhuma avaliação' if not len(evals) else ''}}</i>
<br/>
{{include "eval/list.html"}}

{{if not auth.has_membership('Professor'):}}
    {{if 'prof_id' in request.vars:}}
        {{=A('Adicionar avaliação', _href=URL(request.application, 'eval', 'create', vars=dict(prof_id=prof.id)))}}
    {{else:}}
        {{=A('Adicionar avaliação', _href=URL(request.application, 'eval', 'create', vars=dict(disc_id=disc.id)))}}
    {{pass}}
{{pass}}
